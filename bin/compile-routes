#!/usr/bin/env php
<?php

include dirname(__dir__).'/vendor/autoload.php';

$routes = include dirname(__dir__).'/config/routes.php';

echo "\033[32mLinna App compile-routes \033[0m\n";

$fileContent =
'<?php
/**
 * Linna App.
 *
 * This file is automatically generated, do not modify.
 *
 * @author Sebastian Rapetti <sebastian.rapetti@alice.it>
 * @copyright (c) 2018, Sebastian Rapetti
 * @license http://opensource.org/licenses/MIT MIT License
 */'.
"\n".
'declare(strict_types=1);'.
"\n\n".
'return '.
var_export($routes, true).
';'.
"\n";

$handle = fopen(dirname(__dir__).'/config/routes.compiled.php', 'w');
fwrite($handle, $fileContent);
fclose($handle);

echo count($routes)." routes exported \n";